const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/slidev/shiki-UDaayf3g.js","assets/monaco/bundled-types-Bg2D90xD.js","assets/modules/file-saver-C8QSpN-3.js","assets/modules/vue-BPHD4SQW.js","assets/monaco/bundled-types-6rKWZNt3.css","assets/modules/shiki-CBiZxi6l.js","assets/modules/shiki-CozCpemh.css"])))=>i.map(i=>d[i]);
import{ac as I,r as x,d as B,G as L,f as l,o as a,z as P,Z as D,N as H,ad as z,M as J,D as F,W as K,I as W,i as A,a3 as q,g as M,t as j,K as y,F as S,_ as R,b as G,n as U,ae as Z,k as Q,e as X,w as Y}from"../modules/vue-BPHD4SQW.js";import{h as ee,_ as N,e as te,f as E}from"../monaco/bundled-types-Bg2D90xD.js";import{k as ne,m as re}from"../index-CC4njTRj.js";import{u as se}from"./context-DzKI6Ev5.js";import{_ as oe}from"./IconButton.vue_vue_type_script_setup_true_lang-DF6xTyJB.js";import"../modules/file-saver-C8QSpN-3.js";import"../modules/shiki-CBiZxi6l.js";function ie(s){return Array.from({length:s})}function ae(){console.log("Hello from snippets/external.ts")}const le=Object.freeze(Object.defineProperty({__proto__:null,emptyArray:ie,sayHello:ae},Symbol.toStringTag,{value:"Module"})),T={vue:I,"./external":le},ce=[],ue=ee(async()=>{const s={javascript:O,js:O,typescript:O,ts:O},{getHighlighter:t}=await N(async()=>{const{getHighlighter:i}=await import("./shiki-UDaayf3g.js");return{getHighlighter:i}},__vite__mapDeps([0,1,2,3,4,5,6])),r=await t(),m=async(i,d,c)=>{try{const u=s[d];if(!u)throw new Error(`Runner for language "${d}" not found`);return await u(i,{options:c,highlight:r,run:async(e,n)=>await m(e,n,c)})}catch(u){return console.error(u),{error:`${u}`}}};for(const i of ce){const d=await i(s);Object.assign(s,d)}return{highlight:r,run:m}});function de(s){const t=x([]),r=e=>t.value.push({error:String(e)}),m=(...e)=>t.value.push(e.map(d)),i=Object.assign({},console);i.info=i.log=i.debug=i.warn=i.error=m,i.clear=()=>t.value.length=0;try{const e=`return async (console, __slidev_import, __slidev_on_error) => {
      try {
        ${u(s)}
      } catch (e) {
        __slidev_on_error(e)
      }
    }`;new Function(e)()(i,n=>{const o=T[n];if(!o)throw new Error(`Module not found: ${n}.
Available modules: ${Object.keys(T).join(", ")}. Please refer to https://sli.dev/custom/config-code-runners#additional-runner-dependencies`);return o},r)}catch(e){r(e)}function d(e){return typeof e=="string"?{text:e}:{text:c(e),highlightLang:"javascript"}}function c(e){let n="";if(e instanceof Error)n=`Error: ${JSON.stringify(e.message)}`;else if(e==null||typeof e=="symbol")n=String(e);else if(Array.isArray(e))n=`[${e.map(c).join(", ")}]`;else if(e instanceof Set){const o=[...e];n=`Set (${e.size}) {${o.map(c).join(", ")}}`}else if(e instanceof Map){const o=[...e.entries()];n=`Map (${e.size}) {${o.map(([p,_])=>`${c(p)} => ${c(_)}`).join(", ")}}`}else if(e instanceof RegExp)n=e.toString();else if(typeof e=="string")n=JSON.stringify(e);else if(typeof e=="object"){const o=e.constructor?.name??"",p=o&&o==="Object"?"":o;n=(p?`${p}: `:"")+JSON.stringify(e,(v,g)=>g===void 0?"__undefined__":g,2).replace(/"__undefined__"/g,"undefined"),n=String(n)}else n=String(e);return n}function u(e){return e=e.replace('import "reflect-metadata"',"").replace('require("reflect-metadata")',""),e=e.replace("export {};",""),e}return t}let k;async function O(s){k??=await N(()=>import("../monaco/bundled-types-Bg2D90xD.js").then(r=>r.t),__vite__mapDeps([1,2,3,4])),s=k.transpileModule(s,{compilerOptions:{module:k.ModuleKind.ESNext,target:k.ScriptTarget.ES2022},transformers:{after:[pe]}}).outputText;const t=/import\s*\((.+)\)/g;return s=s.replace(t,(r,m)=>`__slidev_import(${m})`),de(s)}function pe(s){const{factory:t}=s,{isImportDeclaration:r,isNamedImports:m,NodeFlags:i}=k;return d=>{const c=[...d.statements];for(let u=0;u<c.length;u++){const e=c[u];if(!r(e))continue;let n;const o=e.importClause?.namedBindings,p=[];if(e.importClause?.name&&p.push(t.createBindingElement(void 0,t.createIdentifier("default"),e.importClause.name)),o)if(m(o)){for(const v of o.elements)p.push(t.createBindingElement(void 0,v.propertyName,v.name));n=t.createObjectBindingPattern(p)}else n=t.createIdentifier(o.name.text);else n=t.createObjectBindingPattern(p);const _=t.createVariableStatement(void 0,t.createVariableDeclarationList([t.createVariableDeclaration(n,void 0,void 0,t.createAwaitExpression(t.createCallExpression(t.createIdentifier("import"),void 0,[e.moduleSpecifier])))],i.Const));c[u]=_}return t.updateSourceFile(d,c)}}const me=B({__name:"DomElement",props:{element:{}},setup(s){const t=s,r=x();return L(()=>{r.value&&r.value.appendChild(t.element)}),(m,i)=>(a(),l("div",{ref_key:"container",ref:r},null,512))}}),fe={key:0,class:"text-sm text-center opacity-50"},he={key:1,class:"text-sm text-center opacity-50"},_e={key:2,class:"text-sm text-center opacity-50"},ve=["innerHTML"],ge={key:1,class:"text-red-500"},ye={key:3,class:"output-line"},xe=["innerHTML"],be={key:2,class:"separator"},we={key:0,class:"absolute right-1 top-1 max-h-full flex gap-1"},Ae=B({__name:"CodeRunner",props:{modelValue:{},lang:{},autorun:{type:[Boolean,String]},height:{},showOutputAt:{type:[null,Boolean,String,Number,Array]},highlightOutput:{type:Boolean},runnerOptions:{}},emits:["update:modelValue"],setup(s,{emit:t}){const r=s,m=t,{isPrintMode:i}=ne(),d=K(r,"modelValue",m),{$renderContext:c,$clicksContext:u}=se(),e=P(()=>!["slide","presenter"].includes(c.value)),n=i.value?"once":r.autorun,o=x(n),p=D(),_=x(0),v=x(),g=x(r.showOutputAt);if(r.showOutputAt){const b=re();H(()=>{const h=u.calculate(r.showOutputAt);h?(u.register(b,h),z(()=>{g.value=!h.isActive.value})):g.value=!1}),J(()=>u.unregister(b))}const C=te(200,async()=>{if(e.value)return;const{highlight:b,run:h}=await ue();v.value=b;const f=setTimeout(()=>{o.value=!0},500);p.value=await h(d.value,r.lang,r.runnerOptions??{}),_.value+=1,o.value=!1,clearTimeout(f)});return n==="once"?C():n&&F(d,C,{immediate:!0}),(b,h)=>(a(),l(S,null,[W(M("div",{class:"relative flex flex-col rounded-b border-t border-main",style:Q({height:r.height}),"data-waitfor":".slidev-runner-output"},[e.value?(a(),l("div",fe,' Code is disabled in the "'+j(y(c))+'" mode ',1)):o.value?(a(),l("div",he," Running... ")):p.value?(a(),l("div",{key:`run-${_.value}`,class:"slidev-runner-output"},[(a(!0),l(S,null,R(y(E)(Z(p.value)),(f,V)=>(a(),l(S,{key:V},["html"in f?(a(),l("div",{key:0,innerHTML:f.html},null,8,ve)):"error"in f?(a(),l("div",ge,j(f.error),1)):"element"in f?(a(),G(me,{key:2,element:f.element},null,8,["element"])):(a(),l("div",ye,[(a(!0),l(S,null,R(y(E)(f),(w,$)=>(a(),l(S,{key:$},[w.highlightLang&&v.value?(a(),l("span",{key:0,class:"highlighted",innerHTML:v.value(w.text,w.highlightLang)},null,8,xe)):(a(),l("span",{key:1,class:U(w.class)},j(w.text),3)),$<y(E)(f).length-1?(a(),l("span",be,",")):A("v-if",!0)],64))),128))]))],64))),128))])):(a(),l("div",_e," Click the play button to run the code "))],4),[[q,!g.value]]),y(d).trim()?(a(),l("div",we,[X(oe,{class:"w-8 h-8 max-h-full flex justify-center items-center",title:"Run code",onClick:y(C)},{default:Y(()=>[...h[0]||(h[0]=[M("div",{class:"i-carbon:play"},null,-1)])]),_:1},8,["onClick"])])):A("v-if",!0)],64))}});export{Ae as default};
