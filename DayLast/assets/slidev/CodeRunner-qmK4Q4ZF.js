const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/shiki-DxWp71BQ.js","assets/monaco/bundled-types-C81yVie3.js","assets/modules/shiki-B0dABj5T.js","assets/modules/vue-C7g2dpMn.js","assets/modules/shiki-UqVAgQbi.css","assets/modules/file-saver-C8QSpN-3.js","assets/monaco/bundled-types-Dfm743Hf.css"])))=>i.map(i=>d[i]);
import{ao as I,r as x,f as B,O as L,o as a,e as c,Y as P,ap as H,X as D,M as z,U as J,ae as F,g as A,t as C,P as y,F as S,a7 as R,b as U,n as q,j as M,aq as K,k as W,d as X,w as Y,R as G,z as Q,H as Z}from"../modules/vue-C7g2dpMn.js";import{y as ee,_ as V,c as te,g as ne,h as E}from"../monaco/bundled-types-C81yVie3.js";import{l as re,m as se}from"../index-D6TGc4VV.js";import{u as oe}from"./context-BiWggslg.js";import{_ as ie}from"./IconButton.vue_vue_type_script_setup_true_lang-CMdcG6j_.js";import"../modules/shiki-B0dABj5T.js";import"../modules/file-saver-C8QSpN-3.js";function ae(i){return Array.from({length:i})}function le(){console.log("Hello from snippets/external.ts")}const ce=Object.freeze(Object.defineProperty({__proto__:null,emptyArray:ae,sayHello:le},Symbol.toStringTag,{value:"Module"})),T={vue:I,"./external":ce},ue=[Object.values([])[0],Object.values([])[0]].filter(Boolean),de=ee(async()=>{const i={javascript:k,js:k,typescript:k,ts:k},{defaultHighlightOptions:n,getEagerHighlighter:r}=await(await V(async()=>{const{default:s}=await import("../shiki-DxWp71BQ.js");return{default:s}},__vite__mapDeps([0,1,2,3,4,5,6]))).default(),p=await r(),u=(s,l,e)=>p.codeToHtml(s,{...n,lang:l,...e}),f=async(s,l,e)=>{try{const t=i[l];if(!t)throw new Error(`Runner for language "${l}" not found`);return await t(s,{options:e,highlight:u,run:async(o,d)=>await f(o,d,e)})}catch(t){return console.error(t),{error:`${t}`}}};for(const s of ue){const l=await s(i);Object.assign(i,l)}return{highlight:u,run:f}});function fe(i){const n=x([]),r=e=>n.value.push({error:String(e)}),p=(...e)=>n.value.push(e.map(f)),u=Object.assign({},console);u.info=u.log=u.debug=u.warn=u.error=p,u.clear=()=>n.value.length=0;try{const e=`return async (console, __slidev_import, __slidev_on_error) => {
    ${te.monacoRunUseStrict?'"use strict";':""}
      try {
        ${l(i)}
      } catch (e) {
        __slidev_on_error(e)
      }
    }`;new Function(e)()(u,t=>{const o=T[t];if(!o)throw new Error(`Module not found: ${t}.
Available modules: ${Object.keys(T).join(", ")}. Please refer to https://sli.dev/custom/config-code-runners#additional-runner-dependencies`);return o},r)}catch(e){r(e)}function f(e){return typeof e=="string"?{text:e}:{text:s(e),highlightLang:"javascript"}}function s(e){let t="";if(e instanceof Error)t=`Error: ${JSON.stringify(e.message)}`;else if(e==null||typeof e=="symbol")t=String(e);else if(Array.isArray(e))t=`[${e.map(s).join(", ")}]`;else if(e instanceof Set){const o=[...e];t=`Set (${e.size}) {${o.map(s).join(", ")}}`}else if(e instanceof Map){const o=[...e.entries()];t=`Map (${e.size}) {${o.map(([d,_])=>`${s(d)} => ${s(_)}`).join(", ")}}`}else if(e instanceof RegExp)t=e.toString();else if(typeof e=="string")t=JSON.stringify(e);else if(typeof e=="object"){const o=e.constructor?.name??"",d=o&&o==="Object"?"":o;t=(d?`${d}: `:"")+JSON.stringify(e,(v,g)=>g===void 0?"__undefined__":g,2).replace(/"__undefined__"/g,"undefined"),t=String(t)}else t=String(e);return t}function l(e){return e=e.replace('import "reflect-metadata"',"").replace('require("reflect-metadata")',""),e=e.replace("export {};",""),e}return n}let O;async function k(i){O??=await V(()=>import("../monaco/bundled-types-C81yVie3.js").then(r=>r.t),__vite__mapDeps([1,2,3,4,5,6])),i=O.transpileModule(i,{compilerOptions:{module:O.ModuleKind.ESNext,target:O.ScriptTarget.ES2022},transformers:{after:[pe]}}).outputText;const n=/import\s*\((.+)\)/g;return i=i.replace(n,(r,p)=>`__slidev_import(${p})`),fe(i)}function pe(i){const{factory:n}=i,{isImportDeclaration:r,isNamedImports:p,NodeFlags:u}=O;return f=>{const s=[...f.statements];for(let l=0;l<s.length;l++){const e=s[l];if(!r(e))continue;let t;const o=e.importClause?.namedBindings,d=[];if(e.importClause?.name&&d.push(n.createBindingElement(void 0,n.createIdentifier("default"),e.importClause.name)),o)if(p(o)){for(const v of o.elements)d.push(n.createBindingElement(void 0,v.propertyName,v.name));t=n.createObjectBindingPattern(d)}else t=n.createIdentifier(o.name.text);else t=n.createObjectBindingPattern(d);const _=n.createVariableStatement(void 0,n.createVariableDeclarationList([n.createVariableDeclaration(t,void 0,void 0,n.createAwaitExpression(n.createCallExpression(n.createIdentifier("import"),void 0,[e.moduleSpecifier])))],u.Const));s[l]=_}return n.updateSourceFile(f,s)}}const me=B({__name:"DomElement",props:{element:{}},setup(i){const n=i,r=x();return L(()=>{r.value&&r.value.appendChild(n.element)}),(p,u)=>(a(),c("div",{ref_key:"container",ref:r},null,512))}}),he={key:0,class:"text-sm text-center opacity-50"},_e={key:1,class:"text-sm text-center opacity-50"},ve={key:2,class:"text-sm text-center opacity-50"},ge=["innerHTML"],ye={key:1,class:"text-red-500"},xe={key:3,class:"output-line"},be=["innerHTML"],we={key:2,class:"separator"},Se={key:0,class:"absolute right-1 top-1 max-h-full flex gap-1"},Re=B({__name:"CodeRunner",props:{modelValue:{},lang:{},autorun:{type:[Boolean,String]},height:{},showOutputAt:{type:[null,Boolean,String,Number,Array]},highlightOutput:{type:Boolean},runnerOptions:{}},emits:["update:modelValue"],setup(i,{emit:n}){const r=i,p=n,{isPrintMode:u}=re(),f=G(r,"modelValue",p),{$renderContext:s,$clicksContext:l}=oe(),e=Q(()=>!["slide","presenter"].includes(s.value)),t=u.value?"once":r.autorun,o=x(t),d=Z(),_=x(0),v=x(),g=x(r.showOutputAt);if(r.showOutputAt){const b=se();P(()=>{const h=l.calculate(r.showOutputAt);h?(l.register(b,h),H(()=>{g.value=!h.isActive.value})):g.value=!1}),D(()=>l.unregister(b))}const j=ne(200,async()=>{if(e.value)return;const{highlight:b,run:h}=await de();v.value=b;const m=setTimeout(()=>{o.value=!0},500);d.value=await h(f.value,r.lang,r.runnerOptions??{}),_.value+=1,o.value=!1,clearTimeout(m)});return t==="once"?j():t&&z(f,j,{immediate:!0}),(b,h)=>(a(),c(S,null,[J(A("div",{class:"relative flex flex-col rounded-b border-t border-main",style:W({height:r.height}),"data-waitfor":".slidev-runner-output"},[e.value?(a(),c("div",he,' Code is disabled in the "'+C(y(s))+'" mode ',1)):o.value?(a(),c("div",_e," Running... ")):d.value?(a(),c("div",{key:`run-${_.value}`,class:"slidev-runner-output"},[(a(!0),c(S,null,R(y(E)(K(d.value)),(m,N)=>(a(),c(S,{key:N},["html"in m?(a(),c("div",{key:0,innerHTML:m.html},null,8,ge)):"error"in m?(a(),c("div",ye,C(m.error),1)):"element"in m?(a(),U(me,{key:2,element:m.element},null,8,["element"])):(a(),c("div",xe,[(a(!0),c(S,null,R(y(E)(m),(w,$)=>(a(),c(S,{key:$},[w.highlightLang&&v.value?(a(),c("span",{key:0,class:"highlighted",innerHTML:v.value(w.text,w.highlightLang)},null,8,be)):(a(),c("span",{key:1,class:q(w.class)},C(w.text),3)),$<y(E)(m).length-1?(a(),c("span",we,",")):M("v-if",!0)],64))),128))]))],64))),128))])):(a(),c("div",ve," Click the play button to run the code "))],4),[[F,!g.value]]),y(f).trim()?(a(),c("div",Se,[X(ie,{class:"w-8 h-8 max-h-full flex justify-center items-center",title:"Run code",onClick:y(j)},{default:Y(()=>[...h[0]||(h[0]=[A("div",{class:"i-carbon:play"},null,-1)])]),_:1},8,["onClick"])])):M("v-if",!0)],64))}});export{Re as default};
